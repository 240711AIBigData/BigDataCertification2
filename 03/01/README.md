# CHAPTER01 가설검정
- 어떤 주장을 제기하고, 그 주장이 통계적으로 유의미한지 판단하기 위해 사용

  - 불확실한 상황 속에서 통계적 원리를 통해 결론 찾음
 
- 모든 데이터를 조사하고 분석하면 가설검정 필요 X

- 엄청난 비용과 시간이 들어가는 일에는 가설검정 이용하는 것이 효율적

  - ex) 대한민국 인구 전체 조사
 
    - 모집단(population) : 대한민국 인구 전체
   
    - 표본(sample) : 모집단을 알기 위해 관찰한 데이터의 일부
   
    - 표본 데이터를 통해 가설검정 진행
   
- 시험에서 주어진 데이터는 모집단으로부터 추출한 표본 데이터

<br>

SECTION01 가설검정의 이해
---
### 01. 귀무가설과 대립가설
- 통계적 가설검정의 두 가지 가설

  - 귀무가설(null hypothesis, H₀)
 
    - 기존에 알려진 사실
   
      - ex) '아메리카노 한 잔의 원두는 20g 이 아니다' 라고 주장할 때 귀무가설
     
        - : &nbsp; '아메리카노 한 잔의 원두는 20g 이다'
 
  - 대립가설(alternative hypothesis, H₁)
 
    - 입증하고자 하는 가설
      
      - ex) '아메리카노 한 잔의 원두는 20g 이 아니다' 라고 주장할 때 대립가설
     
        - : &nbsp; '아메리카노 한 잔의 원두는 20g 이 아니다'

<br>

### 02. 가설검정의 결론
- 귀무가설과 대립가설이 존재할 때 가설검정의 결과 : 귀무가설 또는 대립가설 채택

  - 귀무가설이 옮다고 밝혀진 경우
 
    - 가설검정의 통계적인 결론은 '귀무가설을 기각하지 못한다'
   
      - 귀무가설이 기존에도 사실이었으므로 '채택한다' 가 아닌 '기각하지 못한다' 사용
   
  - 대립가설이 옳다고 밝혀진 경우
 
    - 가설검정의 통계적인 결론은 '귀무가설을 기각하고 대립가설을 채택한다'
   
- 시험에서는 명확한 답변 작성 필요

  - 귀무가설 기준으로 채택 및 기각을 물으면 '귀무가설 채택' or '귀무가설 기각' 으로 기재

<br>

### 03. 가설검정 프로세스
- 가설 검정 방법

  - 기각역 이용하는 방법
 
  - 유의확률 이용하는 방법
 
<br>

#### (1) 유의확률 이용하는 방법
- 통계적 가설 설정(귀무가설과 대립가설)

  - 검정하고자 하는 가설 설정
 
    - 귀무가설(H₀) : 기존에 알려진 또는 일반적인 사실(주장)
    
    - 대립가설(H₁) : 입증하고자 하는 가설(주장)

- 유의수준 결정

  - 유의수준 : 귀무가설을 기각하기 위해 필요한 기준값
 
    - 일반적으로 0.05 또는 0.01 같은 값 사용
   
    - 검정 결과를 해석하는 데 중요한 역할
   
- 검정 통게량 및 유의확률 계산

  - 표본 데이터의 검정 통계량 계산
 
    - 검정 통계량 : 가설을 평가하기 위해 사용되는 값
   
    - 검정통계량을 사용해 유의확률(p-value) 계산
   
- 결과 도출

  - 유의확률 < 유의수준 : 귀무가설 기각
 
  - 유의확률 > 유의수준 : 귀무가설 채택

<br>

---

<br>

SECTION02 단일 표본 검정
---
### 01. 단일 표본 검정(One sample t-test)
- 어떤 집단의 평균이 특정 값과 유의미하게 다른지를 검정하는 통계 방법

<br>

> ex
```
  영화관에서 판매하는 팝콘의 무게가 120g 으로 알려져 있다.
  그런데 판매할 때마다 무게가 다른 것 같아 평균적으로 무게가 120g 인지 확인하고자 한다.
```
- 단일 표본 검정 사용 가능

<br>

### 02. 표본
- 시험에서 주어진 데이터는 표본 데이터

  - 평균 표본은 구하라는 문제가 출제된다면 주어진 데이터를 갖고 평균 구하기

<br>

> ex
```
  판매할 때마다 무게를 모두 측정해 기록하는 것은 비효율적이므로 손님들이 팝콘을 구매할 때 무작위로 선택해 무게 측정
```
- 표본 = 선택된 팝콘

<br>

### 03. t-test(t-검정)
- 표본의 크기, 표본의 평균, 표본의 표준편차 등을 활용해 귀무가설과 다른지 t-test(t-검정) 수행

  - ex) 기존에 알려진 120g 과 다른지 t-test 수행

- t-test(t-검정) 결과는 p-value(p-값) 주어짐

  - 이 값이 얼마나 작은지에 따라 판단 가능
 
    - 유의수준보다 작으면 통계적으로는 유의미하게 다르다고 결론
   
    - ex) 유의수준(ex 0.05)보다 작으면 평균적으로 120g 이 아니라고 할 만한 충분한 근거가 있다는 의미

<br>

> 단일 표본 검정에서는 scipy.stats 의 ttest_1samp() 활용
```python
  ttest_1samp(a, popmean, alternative)
```
- a : 모집단에서 뽑은 표본 데이터

- popmean : 비교하려는 모집단의 평균 또는 기대값

- alternative(대립가설 정의)

  - μ > μ₀ : greater, 주어진(알려진) 특정 값보다 평균이 크다
 
  - μ < μ₀ : less, 주어진(알려진) 특정 값보다 평균이 작다
 
  - μ != μ₀ : two-sided(기본값), 주어진(알려진) 특정 값과 표본의 평균이 같지 않다

<br>

#### 💡 μ(뮤)와 μ₀(뮤 제로) 차이
- μ(뮤) : 통계학에서 주로 모집단의 평균을 의미하는 기호

  - 모집단의 특성을 추정할 때 사용
 
- μ(뮤)와 μ₀(뮤 제로)는 모집단의 평균과 귀무가설에서 주장하는 모집단의 평균 차이 의미

  - μ(뮤) : 팝콘의 실제 평균 무게
  
  - μ₀(뮤 제로) : 기존에 알려진 무게(ex. 120g)

<br>

#### ✏️ 문제
> 영화관에서 판매하는 팝콘 라지 사이즈의 무게는 일반적으로 120g 으로 알려져 있다.<br>
> 이제 이 데이터를 갖고 t-test 를 수행한다.<br>
> 가설검정 프로세스 순서로 풀어본다.

```python
  import pandas as pd
  df = pd.DataFrame({
      'weights' : [122, 121, 120, 119, 125, 115, 121, 118, 117, 127,
                   123, 129, 119, 124, 114, 126, 122, 124, 121, 116,
                   120, 123, 127, 118, 122, 117, 124, 125, 123, 121]
  })
```
- 통계적 가설 설정(귀무가설과 대립가설)

  - 귀무가설 : '기존에 알려진 사실' or '변화가 없음' or '차이가 없음' 을 주장하는 가설
 
    - μ = μ₀
 
    - 팝콘 라지 사이즈의 평균 무게는 120g 이다
   
  - 대립가설 : '기존에 알려진 사실과 다름' or '변화가 있음' 등 귀무가설과 반대의 주장을 하는 가설
 
    - μ != μ₀
 
    - 팝콘 라지 사이즈의 평균 무게는 120g 이 아니다
   
- 유의수준 결정

  - 유의수준은 별도 안내가 없다면 0.05 를 기준으로 함
 
- 검정 통계량과 유의확률

  - 단일 표본 검정을 수행하는 ttest_1samp(표본 데이터, 알려진 평균값) 함수
 
    - 검정 통계량과 유의확률(p-value) 반환

- 결과 도출

  - p-value < 유의수준(0.05)
 
    - 팝콘 라지 사이즈의 평균 무게가 120g 이 아니라는 증거가 있다는 의미
   
    - 귀무가설 기각, 대립가설 채택
   
  - p-value > 유의수준(0.05)
 
    - 팝콘 라지 사이즈의 평균 무게가 120g 이라는 기존 가설을 기각할 충분한 증거를 얻지 못했다고 판단 가능
   
    - 귀무가설 채택, 대립가설 기각
   
  - 단일 표본 검정은 scipy 라이브러리 활용
 
    - ttest_1samp() 함수에 주어진 무게 데이터와 알려진 평균값 대입

<br>

> 코드
```python
  from scipy import stats
  t_statistic, p_value = stats.ttest_1samp(df['weights'], 120)
  print('t-statistic :', t_statistic)
  print('p-value :', p_value)
  
  stats.ttest_1samp(df['weights'], 120)
```
- ttest_1samp() 결과를 변수로 반환받지 않고 반환되는 전체 값 출력도 가능

> 결과
```python
  t-statistic : 2.1155384372682344
  p-value : 0.043092957066609296
  
  TtestResult(statistic=2.1155384372682344, pvalue=0.043092957066609296, df=29)
```
- p-value < 0.05 : 귀무가설 기각, 대립가설 채택

<br>

<details>
  <summary>💡 코랩과 시험 환경에서 소숫점 아래 몇 자리가 다를 수 있음</summary>

<br>

- 코랩과 시험 환경은 사이파이(scipy) 버전에 차이 有

> 시험 환경 결과
```python
  TtestResult(statistic=2.115538437268235, pvalue=0.04309295706660919)
```
- df(자유도) 유무와 소수 자릿수 표현에 차이 발생

  - 시험에서는 2~4번째에서 반올림 요구하므로 정답 제출에는 문제 X

<br>

> 버전 확인 방법
```python
  import scipy
  print(scipy.__version__)
```

</details>

<br>

---

<br>

SECTION03 대응 표본 검정
---



<br>

---

<br>

SECTION04 독립 표본 검정
---



<br>

